{% extends 'poc4/base.html' %}
{% block content %}
<div class="container-xxl content-wrap">
  <!-- Banner -->
  <div class="bg-danger text-white py-3 mb-4 rounded shadow-sm text-center">
    <h2 class="mb-0">POC4 Data Migration &amp; Reconciliation</h2>
    <small>Modern Data Migration Workflow</small>
  </div>

  {% include 'poc4/_subnav.j2' %}
  {% include 'poc4/_steps.j2' %}
  <!-- Subheading -->
  <div class="d-flex align-items-center justify-content-between mb-2">
    <div>
      <h5 class="mb-0">Select Critical Fields</h5>
      <div class="text-muted small">Choose key fields from available origins and the target schema</div>
    </div>
  </div>
  <style>
    /* Modern polish for this page */
    .card-header{letter-spacing:.2px}
  .origin-block{background:#fff; border:1px solid #f0f2f4; border-radius:.5rem; padding:.75rem 1rem}
    .origin-block + .origin-block{margin-top:1rem}
    .origin-accent-source{border-left:4px solid #d32f2f}
    .origin-accent-legacy{border-left:4px solid #212529}
    .origin-accent-extra{border-left:4px solid #0d6efd}
  .origin-accent-target{border-left:4px solid #6f42c1}
    .form-check.small{padding:.2rem .25rem; border-bottom:1px dashed #f1f3f5}
    .form-check.small:last-child{border-bottom:none}
    .badge-counter{font-weight:600}
    .sticky-header{position:sticky; top:0; z-index:1}
  /* Header row layout to avoid overlap */
  .origin-row{display:flex; justify-content:space-between; align-items:center; gap:.75rem; flex-wrap:wrap}
  .origin-title{flex:1 1 auto; min-width:180px}
  .origin-controls{display:flex; align-items:center; gap:.75rem; flex-wrap:wrap; justify-content:flex-end}
  .origin-controls .form-check{white-space:nowrap; display:flex; align-items:center; margin-left:.25rem}
  .origin-controls .btn{white-space:nowrap}
  .origin-controls{padding-right:1rem}
  .card-header.sticky-header{padding-right:1.25rem}
  /* Extra left gutter inside bordered blocks so checkboxes clear the accent stripe */
  .origin-block .form-check.small{padding:.2rem .25rem .2rem .75rem}
  .origin-block .form-check .form-check-input{margin-left:0; margin-right:.5rem}
  .origin-block .form-check .form-check-label{margin-left:.05rem}
  .text-purple{color:#6f42c1}
  </style>
  <form method="post" id="field-select-form">
  <!-- Top action bar -->
  <div class="d-flex justify-content-between align-items-center mb-3">
    <a href="{{ url_for('poc4.page1') }}" class="btn btn-outline-secondary">Back</a>
    <div class="d-flex align-items-center gap-2">
      <button type="button" class="btn btn-help btn-sm" data-bs-toggle="modal" data-bs-target="#helpModalP1b" aria-label="Help about Field Selection">
        <i class="bi bi-question-circle-fill"></i>
        Help
      </button>
      <button type="submit" class="btn btn-next" id="next-btn">Next</button>
    </div>
  </div>
  <div class="row g-4">
    <div class="col-lg-7">
      <div class="card h-100 shadow-sm">
        <div class="card-header bg-light text-danger fw-bold d-flex justify-content-between align-items-center sticky-header">
          <div class="d-flex align-items-center gap-3">
            <span>Origin Fields</span>
            <span class="badge bg-light text-dark border" title="Selected/Total Source fields">S <span id="src-count" class="badge-counter">0/0</span></span>
            <span class="badge bg-light text-dark border" title="Selected/Total Legacy fields">L <span id="leg-count" class="badge-counter">0/0</span></span>
          </div>
          <div class="d-flex align-items-center gap-3">
            <div class="form-check form-check-inline m-0 small">
              <input class="form-check-input" type="checkbox" id="filter-source">
              <label class="form-check-label" for="filter-source"><span class="badge bg-danger">SOURCE</span></label>
            </div>
            <div class="form-check form-check-inline m-0 small">
              <input class="form-check-input" type="checkbox" id="filter-legacy">
              <label class="form-check-label" for="filter-legacy"><span class="badge bg-dark">LEGACY</span></label>
            </div>
          </div>
        </div>
        <div class="card-body" style="max-height:60vh;overflow:auto;">
          <!-- Source section -->
      <div id="source-section" class="origin-block origin-accent-source" style="display:none;">
            <div class="origin-row mb-2">
              <span class="fw-semibold text-danger origin-title">Source ({{ source_schema_file }})</span>
              <div class="origin-controls">
                <button class="btn btn-outline-secondary btn-sm" id="p1b-min-source" type="button">Minimize</button>
                <div class="form-check m-0 small">
                  <input class="form-check-input" type="checkbox" id="select_all_source">
                  <label class="form-check-label" for="select_all_source">Select All</label>
                </div>
              </div>
            </div>
            <div id="p1b-body-source">
            {% for f in source_fields %}
            <div class="form-check small">
              <input class="form-check-input source-box" type="checkbox" name="source_field" value="{{ f.name }}" id="src_{{ loop.index }}">
              <label class="form-check-label" for="src_{{ loop.index }}">{{ f.table }}.{{ f.name }} <span class="badge bg-secondary">{{ f.type }}</span></label>
            </div>
            {% endfor %}
            {% if not source_fields %}<div class="text-muted small">No Source schema selected on Page 1.</div>{% endif %}
            <hr>
            </div>
          </div>
          <!-- Legacy section -->
      <div id="legacy-section" class="origin-block origin-accent-legacy" style="display:none;">
            <div class="origin-row mb-2">
              <span class="fw-semibold text-dark origin-title">Legacy ({{ legacy_schema_file }})</span>
              <div class="origin-controls">
                <button class="btn btn-outline-secondary btn-sm" id="p1b-min-legacy" type="button">Minimize</button>
                <div class="form-check m-0 small">
                  <input class="form-check-input" type="checkbox" id="select_all_legacy">
                  <label class="form-check-label" for="select_all_legacy">Select All</label>
                </div>
              </div>
            </div>
            <div id="p1b-body-legacy">
            {% for f in legacy_fields %}
            <div class="form-check small">
              <input class="form-check-input legacy-box" type="checkbox" name="legacy_field" value="{{ f.name }}" id="leg_{{ loop.index }}">
              <label class="form-check-label" for="leg_{{ loop.index }}">{{ f.table }}.{{ f.name }} <span class="badge bg-secondary">{{ f.type }}</span></label>
            </div>
            {% endfor %}
            {% if not legacy_fields %}<div class="text-muted small">No Legacy schema selected on Page 1.</div>{% endif %}
            </div>
          </div>

          <!-- Extra Data Sources (DS3+) -->
          {% if extra_sources and extra_sources_fields %}
            {% for extra in extra_sources_fields %}
            <div id="extra-section-{{ extra.index }}" class="mb-3 origin-block origin-accent-extra" style="display:none;">
              <div class="origin-row mb-2">
                <span class="fw-semibold text-danger origin-title">Data Source {{ extra.index + 3 }} ({{ extra.file }})</span>
                <div class="origin-controls">
                  <button class="btn btn-outline-secondary btn-sm" id="p1b-min-extra-{{ extra.index }}" type="button">Minimize</button>
                  <div class="form-check m-0 small">
                    <input class="form-check-input" type="checkbox" id="select_all_extra_{{ extra.index }}">
                    <label class="form-check-label" for="select_all_extra_{{ extra.index }}">Select All</label>
                  </div>
                </div>
              </div>
              <div id="p1b-body-extra-{{ extra.index }}">
              {% for f in extra.fields %}
              <div class="form-check small">
                <input class="form-check-input extra-box extra-idx-{{ extra.index }}" type="checkbox" name="extra_field::{{ extra.index }}" value="{{ f.name }}" id="ex_{{ extra.index }}_{{ loop.index }}">
                <label class="form-check-label" for="ex_{{ extra.index }}_{{ loop.index }}">{{ f.table }}.{{ f.name }} <span class="badge bg-secondary">{{ f.type }}</span></label>
              </div>
              {% endfor %}
              {% if not extra.fields %}<div class="text-muted small">No fields in this Data Source.</div>{% endif %}
              <hr>
              </div>
            </div>
            {% endfor %}
          {% endif %}
          </div>
        </div>
      </div>
  <div class="col-lg-5">
      <div class="card h-100 shadow-sm">
        <div class="card-header bg-light sticky-header">
          <div class="origin-row">
            <div class="origin-title">
              <span class="fw-semibold text-danger">Target ({{ target_schema_file }})</span>
              <span class="badge bg-light text-dark border ms-2" title="Selected/Total Target fields">T <span id="tgt-count" class="badge-counter">0/0</span></span>
            </div>
            <div class="origin-controls">
              <button class="btn btn-outline-secondary btn-sm" id="p1b-min-target" type="button">Minimize</button>
              <div class="form-check m-0 small">
                <input class="form-check-input" type="checkbox" id="select_all_target">
                <label class="form-check-label" for="select_all_target">Select All</label>
              </div>
            </div>
          </div>
        </div>
        <div class="card-body" style="max-height:60vh;overflow:auto;">
          <div class="origin-block origin-accent-target">
            <div id="p1b-body-target">
            {% for f in target_fields %}
            <div class="form-check small">
              <input class="form-check-input target-box" type="checkbox" name="target_field" value="{{ f.name }}" id="tgt_{{ loop.index }}">
              <label class="form-check-label" for="tgt_{{ loop.index }}">{{ f.table }}.{{ f.name }} <span class="badge bg-secondary">{{ f.type }}</span></label>
            </div>
            {% endfor %}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- ER Diagram Row -->
  <div class="row g-4 mt-4">
    <div class="col-md-4">
      <div class="card shadow-sm h-100">
        <div class="card-header bg-danger text-white py-2">Source ER Diagram</div>
        <div class="card-body p-2 small">
          <svg viewBox="0 0 320 200" class="w-100" style="max-height:190px">
            <style>.ent{fill:#fff;stroke:#d32f2f;stroke-width:1.2}.rel{stroke:#555;stroke-width:1.1;marker-end:url(#arrow1)}</style>
            <defs><marker id="arrow1" markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto" fill="#555"><path d="M0,0 L6,3 L0,6 Z"/></marker></defs>
            <rect class="ent" x="20" y="20" width="90" height="40" rx="4"/><text x="65" y="45" font-size="10" text-anchor="middle">source_customer</text>
            <rect class="ent" x="130" y="20" width="90" height="40" rx="4"/><text x="175" y="45" font-size="10" text-anchor="middle">source_account</text>
            <rect class="ent" x="240" y="20" width="70" height="40" rx="4"/><text x="275" y="45" font-size="10" text-anchor="middle">txn</text>
            <line class="rel" x1="110" y1="40" x2="130" y2="40"/>
            <line class="rel" x1="220" y1="40" x2="240" y2="40"/>
          </svg>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card shadow-sm h-100">
        <div class="card-header bg-danger text-white py-2">Legacy ER Diagram</div>
        <div class="card-body p-2 small">
          <svg viewBox="0 0 320 200" class="w-100" style="max-height:190px">
            <style>.ent{fill:#fff;stroke:#d32f2f;stroke-width:1.2}.rel{stroke:#555;stroke-width:1.1;marker-end:url(#arrow2)}</style>
            <defs><marker id="arrow2" markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto" fill="#555"><path d="M0,0 L6,3 L0,6 Z"/></marker></defs>
            <rect class="ent" x="15" y="10" width="110" height="40" rx="4"/><text x="70" y="35" font-size="10" text-anchor="middle">legacy_customer</text>
            <rect class="ent" x="135" y="10" width="100" height="40" rx="4"/><text x="185" y="35" font-size="10" text-anchor="middle">legacy_account</text>
            <rect class="ent" x="245" y="10" width="70" height="40" rx="4"/><text x="280" y="35" font-size="10" text-anchor="middle">ledger</text>
            <line class="rel" x1="125" y1="30" x2="135" y2="30"/>
            <line class="rel" x1="235" y1="30" x2="245" y2="30"/>
          </svg>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card shadow-sm h-100">
        <div class="card-header bg-danger text-white py-2">Target ER Diagram</div>
        <div class="card-body p-2 small">
          <svg viewBox="0 0 320 160" class="w-100" style="max-height:160px">
            <style>.ent{fill:#fff;stroke:#d32f2f;stroke-width:1.2}.txt{font-size:11px}</style>
            <rect class="ent" x="40" y="30" width="240" height="70" rx="6"/>
            <text x="160" y="55" class="txt" text-anchor="middle">banking_olap_flat*</text>
            <text x="160" y="72" class="txt" text-anchor="middle">(denormalized unified view)</text>
          </svg>
          <div class="small text-muted">*Flattened star-less structure combining customer, account, transaction, product.</div>
        </div>
      </div>
    </div>
  </div>
  </form>
</div>

<!-- Flags from server for pre-checking origin filters -->
<div id="p1b-flags" data-has-source="{% if source_fields|length > 0 %}1{% else %}0{% endif %}" data-has-legacy="{% if legacy_fields|length > 0 %}1{% else %}0{% endif %}" data-extra-count="{{ extra_sources|length if extra_sources else 0 }}" hidden></div>
{% include 'poc4/_chatpanel.j2' %}

<script>
// Select all handlers
function bindSelectAll(masterId, boxClass){
  const master=document.getElementById(masterId);
  if(!master) return;
  master.addEventListener('change',()=>{
    document.querySelectorAll('.'+boxClass).forEach(cb=>{ cb.checked=master.checked; });
  });
}
bindSelectAll('select_all_source','source-box');
bindSelectAll('select_all_legacy','legacy-box');
bindSelectAll('select_all_target','target-box');
// Bind for extra DS groups
try{
  const extraCount = parseInt(document.getElementById('p1b-flags')?.dataset.extraCount || '0');
  for(let i=0;i<extraCount;i++){
    const id = `select_all_extra_${i}`;
    const cls = `extra-idx-${i}`;
    bindSelectAll(id, cls);
  }
}catch(e){}

// Page-specific ChatPanel commands
window.handleChatCommand = function(cmd, api){
  const t = (cmd||'').trim().toLowerCase();
  function setAll(masterId, cls, val){
    const master=document.getElementById(masterId);
    if(master){ master.checked = val; master.dispatchEvent(new Event('change')); }
    document.querySelectorAll(cls).forEach(cb=> cb.checked = val);
    try{ updateCounts(); }catch(_){ }
  }
  if(t.startsWith('select all ')){
    if(t.endsWith('source')){ api.append('assistant','Will select all Source fields'); api.setLastAction(()=> setAll('select_all_source','.source-box',true)); return true; }
    if(t.endsWith('legacy')){ api.append('assistant','Will select all Legacy fields'); api.setLastAction(()=> setAll('select_all_legacy','.legacy-box',true)); return true; }
    if(t.endsWith('target')){ api.append('assistant','Will select all Target fields'); api.setLastAction(()=> setAll('select_all_target','.target-box',true)); return true; }
  }
  if(t.startsWith('deselect all ') || t.startsWith('unselect all ')){
    if(t.endsWith('source')){ api.append('assistant','Will deselect all Source fields'); api.setLastAction(()=> setAll('select_all_source','.source-box',false)); return true; }
    if(t.endsWith('legacy')){ api.append('assistant','Will deselect all Legacy fields'); api.setLastAction(()=> setAll('select_all_legacy','.legacy-box',false)); return true; }
    if(t.endsWith('target')){ api.append('assistant','Will deselect all Target fields'); api.setLastAction(()=> setAll('select_all_target','.target-box',false)); return true; }
  }
  if(['next','go next','continue'].includes(t)){
    api.append('assistant','Submitting selected fields…');
    api.setLastAction(()=> document.getElementById('field-select-form')?.submit());
    return true;
  }
  if(t.includes('minimize source')){ api.append('assistant','Will minimize Source'); api.setLastAction(()=> document.getElementById('p1b-min-source')?.click()); return true; }
  if(t.includes('minimize legacy')){ api.append('assistant','Will minimize Legacy'); api.setLastAction(()=> document.getElementById('p1b-min-legacy')?.click()); return true; }
  if(t.includes('minimize target')){ api.append('assistant','Will minimize Target'); api.setLastAction(()=> document.getElementById('p1b-min-target')?.click()); return true; }
  return false;
};

// Origin filter toggles (no defaults)
const filterSource = document.getElementById('filter-source');
const filterLegacy = document.getElementById('filter-legacy');
const sourceSection = document.getElementById('source-section');
const legacySection = document.getElementById('legacy-section');
function applyFilters(){
  const showSource = !!filterSource?.checked;
  const showLegacy = !!filterLegacy?.checked;
  if(sourceSection) sourceSection.style.display = showSource? 'block':'none';
  if(legacySection) legacySection.style.display = showLegacy? 'block':'none';
  // Toggle extra sections
  try{
    const extraCount = parseInt(document.getElementById('p1b-flags')?.dataset.extraCount || '0');
    for(let i=0;i<extraCount;i++){
      const sec = document.getElementById(`extra-section-${i}`);
      if(sec) sec.style.display = (showSource || showLegacy) ? 'block' : 'block'; // keep visible when any origin is shown; can refine with per-DS toggles later
    }
  }catch(e){}
}
filterSource?.addEventListener('change', applyFilters);
filterLegacy?.addEventListener('change', applyFilters);
// Pre-check filters based on whether fields are present (reflecting Page 1 enablement)
try{
  const flagsEl = document.getElementById('p1b-flags');
  const hasSource = flagsEl ? flagsEl.dataset.hasSource === '1' : false;
  const hasLegacy = flagsEl ? flagsEl.dataset.hasLegacy === '1' : false;
  if(filterSource) filterSource.checked = !!hasSource;
  if(filterLegacy) filterLegacy.checked = !!hasLegacy;
}catch(e){}
applyFilters();

// Minimize state (Page 1b)
const P1B_MIN_KEY = 'poc4_p1b_min';
function getMinState(){ try{ return JSON.parse(localStorage.getItem(P1B_MIN_KEY)||'{}')||{}; }catch(e){ return {}; } }
function setMinState(key, val){ try{ const s = getMinState(); s[key] = !!val; localStorage.setItem(P1B_MIN_KEY, JSON.stringify(s)); }catch(e){} }
function applyMinState(key, bodyEl, btn){ const s=getMinState(); const minimized=!!s[key]; if(bodyEl){ bodyEl.style.display = minimized? 'none':'block'; } if(btn){ btn.textContent = minimized? 'Expand':'Minimize'; } }
// Wire buttons
(function(){
  const sBtn = document.getElementById('p1b-min-source');
  const sBody = document.getElementById('p1b-body-source');
  if(sBtn && sBody){ applyMinState('source', sBody, sBtn); sBtn.addEventListener('click', ()=>{ const s=getMinState(); const cur=!!s['source']; setMinState('source', !cur); applyMinState('source', sBody, sBtn); }); }
  const lBtn = document.getElementById('p1b-min-legacy');
  const lBody = document.getElementById('p1b-body-legacy');
  if(lBtn && lBody){ applyMinState('legacy', lBody, lBtn); lBtn.addEventListener('click', ()=>{ const s=getMinState(); const cur=!!s['legacy']; setMinState('legacy', !cur); applyMinState('legacy', lBody, lBtn); }); }
  // Target minimize
  const tBtn = document.getElementById('p1b-min-target');
  const tBody = document.getElementById('p1b-body-target');
  if(tBtn && tBody){ applyMinState('target', tBody, tBtn); tBtn.addEventListener('click', ()=>{ const s=getMinState(); const cur=!!s['target']; setMinState('target', !cur); applyMinState('target', tBody, tBtn); }); }
  try{
    const extraCount = parseInt(document.getElementById('p1b-flags')?.dataset.extraCount || '0');
    for(let i=0;i<extraCount;i++){
      const btn = document.getElementById(`p1b-min-extra-${i}`);
      const body = document.getElementById(`p1b-body-extra-${i}`);
      const key = `extra-${i}`;
      if(btn && body){ applyMinState(key, body, btn); btn.addEventListener('click', ()=>{ const s=getMinState(); const cur=!!s[key]; setMinState(key, !cur); applyMinState(key, body, btn); }); }
    }
  }catch(e){}
})();

function setAllByChat(masterId, boxClass, checked){
  const master=document.getElementById(masterId);
  if(master){ master.checked = checked; master.dispatchEvent(new Event('change')); }
  else { document.querySelectorAll('.'+boxClass).forEach(cb=> cb.checked = checked); }
}

async function sendMessage(e){
  e.preventDefault();
  const input=document.getElementById('chat-input');
  const msg=input.value.trim();
  if(!msg) return false;
  appendMessage('You', msg);
  input.value='';
  const lower = msg.toLowerCase();
  // Commands
  if(lower.includes('select all source')){ setAllByChat('select_all_source','source-box', true); }
  if(lower.includes('deselect all source') || lower.includes('unselect all source')){ setAllByChat('select_all_source','source-box', false); }
  if(lower.includes('select all legacy')){ setAllByChat('select_all_legacy','legacy-box', true); }
  if(lower.includes('deselect all legacy') || lower.includes('unselect all legacy')){ setAllByChat('select_all_legacy','legacy-box', false); }
  if(lower.includes('select all target')){ setAllByChat('select_all_target','target-box', true); }
  if(lower.includes('deselect all target') || lower.includes('unselect all target')){ setAllByChat('select_all_target','target-box', false); }
  if(lower==='next' || lower==='go next' || lower==='continue'){
    document.getElementById('field-select-form')?.submit();
    return false;
  }
  // Fall back to server-side chat
  try{
    const res= await fetch('/poc4/chat',{method:'POST', headers:{'Content-Type':'application/x-www-form-urlencoded'}, body:'message='+encodeURIComponent(msg)});
    const data= await res.json(); appendMessage('Bot', data.response);
  }catch(err){ appendMessage('Bot','(error)'); }
  return false;
}
function appendMessage(sender,text){ const chat=document.getElementById('chat-messages'); const div=document.createElement('div'); div.innerHTML=`<strong>${sender}:</strong> ${text}`; chat.appendChild(div); chat.scrollTop=chat.scrollHeight; }

// --- Dynamic selection counters (S/L/T) ---
function updateCounts(){
  const srcBoxes = Array.from(document.querySelectorAll('.source-box'));
  const legBoxes = Array.from(document.querySelectorAll('.legacy-box'));
  const tgtBoxes = Array.from(document.querySelectorAll('.target-box'));
  const srcSel = srcBoxes.filter(b=>b.checked).length; const srcTot = srcBoxes.length;
  const legSel = legBoxes.filter(b=>b.checked).length; const legTot = legBoxes.length;
  const tgtSel = tgtBoxes.filter(b=>b.checked).length; const tgtTot = tgtBoxes.length;
  const s = document.getElementById('src-count'); if(s) s.textContent = `${srcSel}/${srcTot}`;
  const l = document.getElementById('leg-count'); if(l) l.textContent = `${legSel}/${legTot}`;
  const t = document.getElementById('tgt-count'); if(t) t.textContent = `${tgtSel}/${tgtTot}`;
}
document.addEventListener('change', (e)=>{
  if(e.target && (e.target.classList?.contains('source-box') || e.target.classList?.contains('legacy-box') || e.target.classList?.contains('target-box'))){
    updateCounts();
  }
});
document.getElementById('select_all_source')?.addEventListener('change', updateCounts);
document.getElementById('select_all_legacy')?.addEventListener('change', updateCounts);
document.getElementById('select_all_target')?.addEventListener('change', updateCounts);
// Initial counts
updateCounts();
</script>
<!-- Help Modal (Page 1b: Field Selection) -->
<div class="modal fade" id="helpModalP1b" tabindex="-1" aria-labelledby="helpModalP1bLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header bg-light">
        <h5 class="modal-title" id="helpModalP1bLabel">Help — Select Critical Fields</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p><strong>What this page does</strong></p>
        <p>Pick key fields from your origins (Source/Legacy/DS3+) and the Target schema to drive mapping and rules quality. This complements the “clarify and structure” step in POC 3b, tailored to data fields.</p>
        <p><strong>What you need to do</strong></p>
        <ul class="help-list">
          <li>Use the origin filter chips to show/hide Source and Legacy sections.</li>
          <li>Select the fields that matter for migration; minimize sections to stay focused.</li>
          <li>Ensure Target fields cover your business needs; you can adjust the Target Model anytime.</li>
          <li>Click Next to continue to Mapping.</li>
        </ul>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
{% endblock %}
