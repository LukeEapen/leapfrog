<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>PRD Assistant Input</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='custom.css') }}">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">

  <style>
    /* Root Variables */
    :root {
      --primary-red: #dc3545;
      --primary-red-dark: #c82333;
      --primary-grey: #343a40;
      --secondary-grey: #6c757d;
      --light-grey: #f8f9fa;
      --gradient-red: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
      --gradient-grey: linear-gradient(135deg, #343a40 0%, #495057 100%);
      --card-shadow: 0 8px 24px rgba(220, 53, 69, 0.12);
      --border-radius: 0.75rem;
      --transition-speed: 0.3s;
      --input-bg: #f9fafb;
    }

    /* Page Layout */
    body {
      background: linear-gradient(135deg, #38393a 0%, #403f41 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 2rem 1rem;
      font-family: 'Inter', sans-serif;
      color: var(--primary-grey);
    }

    /* Card Styling */
    .input-card {
      background: rgba(255, 255, 255, 0.98);
      padding: 2rem;
      margin: 0.75rem;
      border-radius: var(--border-radius);
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      max-width: 960px;
      width: 100%;
      margin: 1rem;
      animation: fadeIn 0.5s ease-out;
    }

    /* Header Styles */
    h4 {
      color: var(--primary-red);
      font-weight: 600;
      font-size: 1.5rem;
      margin-bottom: 1.5rem;
      /* Reduced from 2rem */
      padding-bottom: 0.375rem;
      /* Reduced from 0.5rem */
      border-bottom: 2px solid rgba(220, 53, 69, 0.1);
    }

    /* Section Titles */
    .section-title {
      background: var(--gradient-grey);
      color: white;
      font-weight: 600;
      padding: 0.625rem 1.25rem;
      /* Reduced from 0.75rem 1.5rem */
      border-radius: var(--border-radius);
      margin-bottom: 1rem;
      /* Reduced from 1.5rem */
      box-shadow: 0 4px 15px rgba(52, 58, 64, 0.15);
    }

    /* Instructions Box */
    .instructions-box {
      background: var(--input-bg);
      padding: 1.25rem;
      border-radius: var(--border-radius);
      border: 1px solid rgba(0, 0, 0, 0.08);
      margin-bottom: 1.5rem;
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.02);
    }

    .instructions-box p {
      color: var(--primary-grey);
      margin-bottom: 1rem;
      line-height: 1.6;
    }

    .instructions-box ul {
      padding-left: 1.2rem;
      margin-bottom: 0;
    }

    .instructions-box li {
      color: var(--secondary-grey);
      margin-bottom: 0.5rem;
    }

    .instructions-box strong {
      color: var(--primary-grey);
      font-weight: 600;
    }

    /* Form Elements */
    .form-label {
      color: var(--primary-grey);
      font-weight: 500;
      margin-bottom: 0.5rem;
      display: flex;
      align-items: center;
    }

    .form-label i {
      color: var(--primary-red);
      margin-right: 0.5rem;
    }

    .form-control {
      background-color: var(--input-bg);
      border: 1px solid #dee2e6;
      border-radius: var(--border-radius);
      padding: 0.75rem 1rem;
      transition: all 0.3s ease;
      font-size: 0.95rem;
    }

    .form-control:focus {
      border-color: var(--primary-red);
      box-shadow: 0 0 0 0.25rem rgba(220, 53, 69, 0.15);
    }

    .form-control::placeholder {
      color: #adb5bd;
      opacity: 0.8;
    }

    /* Form Row Spacing */
    .row.g-4 {
      --bs-gutter-y: 0.75rem;
      /* Reduced from default */
    }

    .row.g-3 {
      --bs-gutter-y: 0.75rem;
      /* Reduced from default */
    }

    /* Form Group Spacing */
    .mb-4 {
      margin-bottom: 1rem !important;
      /* Reduced from 1.5rem */
    }

    textarea.form-control {
      min-height: 120px;
      resize: vertical;
    }

    /* File Input Styling */
    input[type="file"].form-control {
      padding: 0.375rem 0.75rem;
    }

    input[type="file"].form-control::-webkit-file-upload-button {
      background: var(--gradient-grey);
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      margin-right: 1rem;
    }

    /* Submit Button */
    .btn-danger {
      background: var(--gradient-red);
      border: none;
      height: 3.5rem;
      font-size: 1.1rem;
      font-weight: 500;
      border-radius: var(--border-radius);
      transition: all var(--transition-speed) ease;
    }

    .btn-danger:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(220, 53, 69, 0.3);
      background: linear-gradient(135deg, #c82333 0%, #dc3545 100%);
    }

    .btn-danger:disabled {
      background: var(--secondary-grey);
      cursor: not-allowed;
      transform: none;
    }

    /* Loading States */
    #loadingSpinner {
      background: rgba(255, 255, 255, 0.98);
      padding: 1.5rem;
      border-radius: var(--border-radius);
      margin-top: 1rem;
      box-shadow: var(--card-shadow);
      display: none;
    }

    .loading-animation {
      animation: pulse 1.5s infinite;
    }

    /* Validation States */
    .form-control.is-valid {
      border-color: #198754;
      background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23198754' d='M2.3 6.73L.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e");
      padding-right: calc(1.5em + 0.75rem);
      background-repeat: no-repeat;
      background-position: right calc(0.375em + 0.1875rem) center;
      background-size: calc(0.75em + 0.375rem) calc(0.75em + 0.375rem);
    }

    .form-control.is-invalid {
      border-color: var(--primary-red);
      background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e");
    }

    /* Animations */
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes pulse {
      0% {
        opacity: 1;
        transform: scale(1);
      }

      50% {
        opacity: 0.5;
        transform: scale(0.98);
      }

      100% {
        opacity: 1;
        transform: scale(1);
      }
    }

    /* Responsive Adjustments */
    @media (max-width: 768px) {
      body {
        padding: 1rem 0.5rem;
      }

      .input-card {
        padding: 1.25rem;
        margin: 0.375rem;
      }

      h4 {
        font-size: 1.25rem;
      }

      .section-title {
        padding: 0.5rem 1rem;
      }
    }
  </style>

</head>

<body>
  <div class="input-card animate__animated animate__fadeIn">
    <h4 class="mb-4">PRD drafting solution | Context and file upload</h4>

    <div class="card-header bg-secondary text-white d-flex justify-content-between align-items-center">
      <span>Instructions: Using the PRD drafting solution</span>
    </div>
    <div class="instructions-box">
      <p>This agentic AI assistant accelerates the creation of a first-draft Product Requirements Document (PRD) based
        on the product and features you define. By guiding you through a structured input process, it delivers a clear
        and actionable draft – freeing you to focus on refinement, alignment, and execution.</p>
      <ul>
        <li>Provide relevant context, including industry, product details, + documentation that define the product’s
          functionality – <strong>provide as much detail & context as possible</strong></li>
        <li>Upload any supporting materials to strengthen the tool’s understanding and improve the quality of the output
        </li>
        <li>Review and refine the tool’s understanding of the product & features</li>
        <li>Once all sections are complete, download your initial PRD draft, ready for refinement and stakeholder
          feedback</li>
      </ul>

      <div class="card-header bg-secondary text-white d-flex justify-content-between align-items-center">
        <span>Inputs </span>
      </div>
      <div class="instructions-box">

        <form method="post" action="/page1" enctype="multipart/form-data">
          <div class="row g-3 mb-4">
            <div class="row g-4 mb-4">
              <div class="col-md-6">
                <label class="form-label">
                  <i class="bi bi-building me-2"></i>Industry
                </label>
                <input type="text" class="form-control" name="industry" placeholder="e.g., Financial Services" required>
              </div>

              <div class="col-md-6">
                <label class="form-label">
                  <i class="bi bi-diagram-3 me-2"></i>Sector
                </label>
                <input type="text" class="form-control" name="sector" placeholder="e.g., Banking, Insurance" required>
              </div>

              <div class="col-md-6">
                <label class="form-label">
                  <i class="bi bi-globe me-2"></i>Geography
                </label>
                <input type="text" class="form-control" name="geography" placeholder="e.g., USA, Canada" required>
              </div>

              <div class="col-md-6">
                <label class="form-label text-muted">
                  <i class="bi bi-file-earmark-text me-2"></i>Additional Context
                </label>
                <input type="file" class="form-control" name="context_file" accept=".txt,.doc,.docx" disabled
                  style="background-color: #e9ecef; cursor: not-allowed;">
                <small class="text-muted">(Feature temporarily disabled)</small>
              </div>
            </div>

            <div class="mb-4">
              <label class="form-label">What is the product / platform that you are trying to build?</label>
              <textarea name="intent" class="form-control" rows="4"
                placeholder="Insert product description here. Include purpose, target audience, platform (web/mobile/etc.), and any relevant context – provide as much detail for your product as possible to give the tool sufficient context to write the PRD."
                required></textarea>
            </div>
            <div class="mb-4">
              <label class="form-label">What specific features will this PRD cover?</label>
              <textarea name="features" class="form-control" rows="4"
                placeholder="Insert detailed description of the feature here. Be sure to describe what the feature does, how users interact with it, what it must integrate with or support technically, what data it requires or generates, and any important performance, security, or UX constraints."
                required></textarea>
            </div>
            <div class="d-grid mt-4">
              <button type="submit" id="submitBtn" class="btn btn-danger btn-lg w-100" onclick="handleSubmit(event)">
                <span class="default-text">Submit</span>
                <span class="loading-text d-none">Processing...</span>
              </button>
            </div>
          </div>
        </form>

        <div id="loadingSpinner" class="d-flex text-muted justify-content-center">
          <span id="loadingTimer">⏳ 0s</span>
        </div>
      </div>
    </div>

  </div>

  <script>
    function handleSubmit(event) {
      event.preventDefault();

      const form = event.target.closest('form');
      if (!form.checkValidity()) {
        form.reportValidity();
        return;
      }

      const submitBtn = document.getElementById('submitBtn');
      const defaultText = submitBtn.querySelector('.default-text');
      const loadingText = submitBtn.querySelector('.loading-text');

      submitBtn.disabled = true;
      submitBtn.classList.remove('btn-danger');
      submitBtn.classList.add('btn-secondary');

      defaultText.classList.add('d-none');
      loadingText.classList.remove('d-none');

      // Enhanced loading spinner
      document.getElementById('loadingSpinner').innerHTML = `
        <div class="d-flex align-items-center justify-content-center">
            <div class="spinner-border text-primary me-2" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <span class="loading-animation" id="loadingTimer">Processing request...</span>
        </div>
    `;

      document.getElementById('loadingSpinner').style.display = 'block';
      startSpinner();

      form.submit();
    }


    document.addEventListener('DOMContentLoaded', function () {
      const formInputs = document.querySelectorAll('.form-control');

      formInputs.forEach(input => {
        // Add validation styles on input
        input.addEventListener('input', function () {
          validateInput(this);
        });

        // Add validation styles on blur
        input.addEventListener('blur', function () {
          validateInput(this);
        });
      });

      function validateInput(input) {
        if (input.checkValidity()) {
          input.classList.add('is-valid');
          input.classList.remove('is-invalid');
        } else {
          input.classList.add('is-invalid');
          input.classList.remove('is-valid');
        }
      }
    });
  </script>
  <script src="{{ url_for('static', filename='js/global.js') }}"></script>
</body>

</html>